<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui" template="/template/template.xhtml">

	<ui:define name="cuerpo">
		<h:form prependId="false" id="gestion">
			<p:tabView id="tablaContent">
			<p:tab title="ETL Proceso 1: Extraccion" dynamic="true" cache="true">
			
				<h:panelGrid columns="1">
					<p:commandButton rendered="#{extractionETL.ventas == null and extractionETL.auditorias == null}" id="aviso"  ajax="false" value="No hay informacion para realizar el proceso de ETL" class="register aviso animated flash"/>
				</h:panelGrid>
				
				<div class="tipocarga">
				<h:outputText value="Tipo de carga de datos: Acumulacion Simple" rendered="#{extractionETL.tipoCargaDatos == 1}"/>
				<h:outputText value="Tipo de carga de datos: Rollin" rendered="#{extractionETL.tipoCargaDatos == 2}"/>
				</div>
				
				<p:accordionPanel id="panelTablaEmp" >
				
					<p:tab title="Registros de Auditoria" rendered="#{extractionETL.auditorias.size() > 0}">
						<p:dataTable value="#{extractionETL.auditorias}" id="tabla"
							var="a" border="1">
							
							<p:column>
								<f:facet name="header">
								Id
							</f:facet>
								<p:outputLabel value="#{a.id}" />
							</p:column>
							
							<p:column>
								<f:facet name="header">
								Accion
							</f:facet>
								<p:outputLabel value="#{a.accion}" />
							</p:column>
							
							<p:column>
								<f:facet name="header">
								Tabla
							</f:facet>
								<p:outputLabel value="#{a.tabla}" />
							</p:column>
							
							<p:column>
								<f:facet name="header">
								Registro
							</f:facet>
								<p:outputLabel value="#{a.registro}" />
							</p:column>
							
							<p:column>
								<f:facet name="header">
								Origen
							</f:facet>
								<p:outputLabel value="#{a.origen}" />
							</p:column>
							
							<p:column>
								<f:facet name="header">
								Navegador
							</f:facet>
								<p:outputLabel value="#{a.navegador}" />
							</p:column>

							<p:column>
								<f:facet name="header">
								Fecha
							</f:facet>
								<p:outputLabel value="#{a.fecha}" />
							</p:column>
													
						</p:dataTable>
					</p:tab>
					
					<p:tab title="Registros de usuarios"  rendered="#{extractionETL.auditorias.size() > 0}">
						<p:dataTable value="#{extractionETL.usuarios}" id="tablausers"
							var="u" border="1">
							
							<p:column>
								<f:facet name="header">
								codigo
							    </f:facet>
								<p:outputLabel value="#{u.codigo}" />
							</p:column>
							
							<p:column>
								<f:facet name="header">
								username
							    </f:facet>
								<p:outputLabel value="#{u.username}" />
							</p:column>
							
							<p:column>
								<f:facet name="header">
								password
							    </f:facet>
								<p:outputLabel value="********" />
							</p:column>
							
							<p:column>
								<f:facet name="header">
								estado
							    </f:facet>
								<p:outputLabel value="#{u.estado}" />
							</p:column>
							
							<p:column>
								<f:facet name="header">
								persona
							    </f:facet>
								<p:outputLabel value="#{u.persona.codigo}" />
							</p:column>
													
						</p:dataTable>
					</p:tab>

					<p:tab title="Registros de personas usuarios"  rendered="#{extractionETL.auditorias.size() > 0}">
						<p:dataTable value="#{extractionETL.usuarios}" id="tablapersonasusers"
							var="u" border="1">
							
							<p:column>
								<f:facet name="header">
								codigo
							    </f:facet>
								<p:outputLabel value="#{u.persona.codigo}" />
							</p:column>
							
							<p:column>
								<f:facet name="header">
								cedula
							    </f:facet>
								<p:outputLabel value="#{u.persona.cedula}" />
							</p:column>
							
							<p:column>
								<f:facet name="header">
								nombre
							    </f:facet>
								<p:outputLabel value="#{u.persona.nombre}" />
							</p:column>
							
							<p:column>
								<f:facet name="header">
								apellido
							    </f:facet>
								<p:outputLabel value="#{u.persona.apellido}" />
							</p:column>
							
							<p:column>
								<f:facet name="header">
								telefono
							    </f:facet>
								<p:outputLabel value="#{u.persona.telefono}" />
							</p:column>
							
							<p:column>
								<f:facet name="header">
								genero
							    </f:facet>
								<p:outputLabel value="#{u.persona.genero.nombre}" />
							</p:column>
							
							<p:column>
								<f:facet name="header">
								fecha nacimiento
							    </f:facet>
								<p:outputLabel value="#{u.persona.fechaNacimiento}" />
							</p:column>
							
							<p:column>
								<f:facet name="header">
								fecha ingreso
							    </f:facet>
								<p:outputLabel value="#{u.persona.fechaIngreso}" />
							</p:column>
							
							<p:column>
								<f:facet name="header">
								salario
							    </f:facet>
								<p:outputLabel value="#{u.persona.salario}" />
							</p:column>
							
							<p:column>
								<f:facet name="header">
								rol
							    </f:facet>
								<p:outputLabel value="#{u.persona.rol.nombre}" />
							</p:column>
							
							<p:column>
								<f:facet name="header">
								municipio
							    </f:facet>
								<p:outputLabel value="#{u.persona.municipio.nombre}" />
							</p:column>
							
							<p:column>
								<f:facet name="header">
								area empresa
							    </f:facet>
								<p:outputLabel value="#{u.persona.areaEmpresa.nombre}" />
							</p:column>
													
						</p:dataTable>
					</p:tab>
					
					<p:tab title="Registros de Ventas" rendered="#{extractionETL.ventas.size() > 0}">
						<p:dataTable value="#{extractionETL.ventas}" id="tabla2"
							var="v" border="1">
							
							<p:column>
								<f:facet name="header">
								codigo
							</f:facet>
								<p:outputLabel value="#{v.codigo}" />
							</p:column>
							
							<p:column>
								<f:facet name="header">
								fecha_venta
							</f:facet>
								<p:outputLabel value="#{v.fachaVenta}" />
							</p:column>
							
							<p:column>
								<f:facet name="header">
								valorTotal
							</f:facet>
								<p:outputLabel value="#{v.valorTotal}" />
							</p:column>
							
							<p:column>
								<f:facet name="header">
								empresa
							</f:facet>
								<p:outputLabel value="#{v.empresa.codigo}" />
							</p:column>
							
							<p:column>
								<f:facet name="header">
								personaEmpleado
							</f:facet>
								<p:outputLabel value="#{v.personaEmpleado.codigo}" />
							</p:column>
							
							<p:column>
								<f:facet name="header">
								personaCliente
							</f:facet>
								<p:outputLabel value="#{v.personaCliente.codigo}" />
							</p:column>
													
						</p:dataTable>
					</p:tab>
					
					<p:tab title="Registros de clientes" rendered="#{extractionETL.ventas.size() > 0}">
						<p:dataTable value="#{extractionETL.ventas}" id="tabla3"
							var="v" border="1">
							
							<p:column>
								<f:facet name="header">
								codigo
							    </f:facet>
								<p:outputLabel value="#{v.personaCliente.codigo}" />
							</p:column>
							
							<p:column>
								<f:facet name="header">
								cedula
							    </f:facet>
								<p:outputLabel value="#{v.personaCliente.cedula}" />
							</p:column>
							
							<p:column>
								<f:facet name="header">
								nombre
							    </f:facet>
								<p:outputLabel value="#{v.personaCliente.nombre}" />
							</p:column>
							
							<p:column>
								<f:facet name="header">
								apellido
							    </f:facet>
								<p:outputLabel value="#{v.personaCliente.apellido}" />
							</p:column>
							
							<p:column>
								<f:facet name="header">
								telefono
							    </f:facet>
								<p:outputLabel value="#{v.personaCliente.telefono}" />
							</p:column>
							
							<p:column>
								<f:facet name="header">
								genero
							    </f:facet>
								<p:outputLabel value="#{v.personaCliente.genero.nombre}" />
							</p:column>
							
							<p:column>
								<f:facet name="header">
								fecha nacimiento
							    </f:facet>
								<p:outputLabel value="#{v.personaCliente.fechaNacimiento}" />
							</p:column>
							
							<p:column>
								<f:facet name="header">
								fecha ingreso
							    </f:facet>
								<p:outputLabel value="#{v.personaCliente.fechaIngreso}" />
							</p:column>
							
							<p:column>
								<f:facet name="header">
								salario
							    </f:facet>
								<p:outputLabel value="#{v.personaCliente.salario}" />
							</p:column>
							
							<p:column>
								<f:facet name="header">
								rol
							    </f:facet>
								<p:outputLabel value="#{v.personaCliente.rol.nombre}" />
							</p:column>
							
							<p:column>
								<f:facet name="header">
								municipio
							    </f:facet>
								<p:outputLabel value="#{v.personaCliente.municipio.nombre}" />
							</p:column>
							
							<p:column>
								<f:facet name="header">
								area empresa
							    </f:facet>
								<p:outputLabel value="#{v.personaCliente.areaEmpresa.nombre}" />
							</p:column>
													
						</p:dataTable>
					</p:tab>
					
					<p:tab title="Registros de empleados" rendered="#{extractionETL.ventas.size() > 0}">
						<p:dataTable value="#{extractionETL.ventas}" id="tabla4"
							var="v" border="1">
							
							<p:column>
								<f:facet name="header">
								codigo
							    </f:facet>
								<p:outputLabel value="#{v.personaEmpleado.codigo}" />
							</p:column>
							
							<p:column>
								<f:facet name="header">
								cedula
							    </f:facet>
								<p:outputLabel value="#{v.personaEmpleado.cedula}" />
							</p:column>
							
							<p:column>
								<f:facet name="header">
								nombre
							    </f:facet>
								<p:outputLabel value="#{v.personaEmpleado.nombre}" />
							</p:column>
							
							<p:column>
								<f:facet name="header">
								apellido
							    </f:facet>
								<p:outputLabel value="#{v.personaEmpleado.apellido}" />
							</p:column>
							
							<p:column>
								<f:facet name="header">
								telefono
							    </f:facet>
								<p:outputLabel value="#{v.personaEmpleado.telefono}" />
							</p:column>
							
							<p:column>
								<f:facet name="header">
								genero
							    </f:facet>
								<p:outputLabel value="#{v.personaEmpleado.genero.nombre}" />
							</p:column>
							
							<p:column>
								<f:facet name="header">
								fecha nacimiento
							    </f:facet>
								<p:outputLabel value="#{v.personaEmpleado.fechaNacimiento}" />
							</p:column>
							
							<p:column>
								<f:facet name="header">
								fecha ingreso
							    </f:facet>
								<p:outputLabel value="#{v.personaEmpleado.fechaIngreso}" />
							</p:column>
							
							<p:column>
								<f:facet name="header">
								salario
							    </f:facet>
								<p:outputLabel value="#{v.personaEmpleado.salario}" />
							</p:column>
							
							<p:column>
								<f:facet name="header">
								rol
							    </f:facet>
								<p:outputLabel value="#{v.personaEmpleado.rol.nombre}" />
							</p:column>
							
							<p:column>
								<f:facet name="header">
								municipio
							    </f:facet>
								<p:outputLabel value="#{v.personaEmpleado.municipio.nombre}" />
							</p:column>
							
							<p:column>
								<f:facet name="header">
								area empresa
							    </f:facet>
								<p:outputLabel value="#{v.personaEmpleado.areaEmpresa.nombre}" />
							</p:column>
													
						</p:dataTable>
					</p:tab>
					
				</p:accordionPanel>
				
				<h:panelGrid columns="2">
				    <p:commandButton id="btatras"  ajax="false" value="Regresar"  action="/paginas/seguro/administrador/GestionEmpresa.xhtml?faces-redirect=true" class="login"/>
					<p:commandButton rendered="#{extractionETL.ventas.size() > 0 || extractionETL.auditorias.size() > 0}" id="btregis"  ajax="false" value="Paso 2 ETL: Transformacion"  action="/paginas/seguro/etl/Transformation.xhtml?faces-redirect=true" class="register"/>
				</h:panelGrid>
				</p:tab>
			</p:tabView>
		</h:form>
	</ui:define>

</ui:composition>